<!DOCTYPE html>
<html lang="en" ng-app="ockbApp" ng-controller="appController">
    <head>
        <meta charset="utf-8">
        <!-- build:js(.) scripts/vendor.js -->
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/datatables.net/js/jquery.dataTables.js"></script>
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/angular-datatables/dist/angular-datatables.js"></script>
        <script src="bower_components/angular-route/angular-route.js"></script>
        <script src="bower_components/angular-translate/angular-translate.js"></script>
        <script src="bower_components/angular-translate-loader-static-files/angular-translate-loader-static-files.js"></script>
        <script src="bower_components/angular-tree-control/angular-tree-control.js"></script>
        <script src="bower_components/bootstrap/js/modal.js"></script>
        <script src="bower_components/bootstrap/js/alert.js"></script>
        <script src="bower_components/ng-tags-input/ng-tags-input.js"></script>
        <!-- endbuild -->

        <!-- build:css(.) styles/vendor.css -->
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
        <link rel="stylesheet" href="bower_components/angular-datatables/dist/css/angular-datatables.css">
        <link rel="stylesheet" href="bower_components/angular-tree-control/css/tree-control.css">
        <link rel="stylesheet" href="bower_components/ng-tags-input/ng-tags-input.bootstrap.css">
        <!-- endbuild -->

        <!-- build:css(app) styles/index.css -->
        <link rel="stylesheet" href="styles/index.css">
        <link rel="stylesheet" href="styles/highlight.css">
        <link rel="stylesheet" href="styles/ng-tags.css">
        <!-- endbuild -->
        <script src="conf/config.js"></script>
        <!-- build:js(app) scripts/scripts.js -->
        <script src="scripts/app.js"></script>
        <script src="scripts/searchcontroller.js"></script>
        <script src="scripts/detailcontroller.js"></script>
        <script src="scripts/navigatorcontroller.js"></script>
        <script src="scripts/addcontroller.js"></script>
        <script src="scripts/deletecontroller.js"></script>
        <!-- endbuild -->
    </head>
    <body>
        <div class="header">
            <nav class="navbar navbar-oc">
                <div class="container-fluid">
                    <div class="navbar-header">
                      <div style="margin-top: 8px;">
                        <img src="/images/logo-white.png" style="height: 32px;" alt="ockb" title="ockb">
                        <a ng-click="refresh()">
                          <span class="brand ng-binding">{{ 'index.brand' | translate }}</span>
                        </a>
                      </div>
                    </div>

                    <div ng-show="internalUse">
                        <!-- Button trigger create modal -->
                        <button type="button" class="btn btn-default create-button" data-toggle="modal" data-backdrop="static" data-target="#createModal">
                          {{ 'index.add' | translate }}
                        </button>
                    </div>
                </div>
            </nav>
        </div>
        <div ng-controller="navigatorcontroller as navctrl" class="container-fluid">
            <div class="row">
                <div class="col-sm-3">
                    <div class="tree-border">
                    <treecontrol class="tree-light"
                                 tree-model="dataForTheTree"
                                 options="treeOptions"
                                 node-children="children"
                                 on-selection="showSelected(node)"
                                 selected-node="node">
                        <span id="{{node.type}}_{{node.id}}">{{node.id}} {{node.description}}</span>
                    </treecontrol>
                    </div>
                </div>
                <div class="col-sm-9">
                    <form novalidate class="search-form form-inline">
                        <div class="text-left">
                            <span class="glyphicon glyphicon-search"></span>
                            <label class="sr-only" for="home-search">{{ 'index.search.label' | translate }}</label>
                            <input ng-model="navctrl.searchContent" type="search" class="form-control input-lg" name="search" id="home-search" size="65" placeholder="{{ 'index.search.label' | translate }}">
                            <button href=href="javascript:void(0)" ng-click="navctrl.search()" type="submit" class="btn btn-primary btn-lg">{{ 'index.search.button' | translate }}</button>
                        </div>
                    </form>
                    <div ng-show="navctrl.isOCKBEmpty" class="ockb-warning">
                      </br>
                      <div class="alert alert-warning">
                        <a class="close" data-dismiss="alert">&times;</a>
                        <strong>{{ 'index.warning' | translate }}</strong>{{ 'index.warningContent' | translate }}
                      </div>
                    </div>
                    </br>
                    <div ng-view></div>
                </div>
            </div>

          <!-- Create Modal -->
          <div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModalLabel">
            <div ng-controller="addcontroller">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="createModalLabel">{{ 'add.create.knowledge' | translate }}</h4>
                  </div>
                  <div class="modal-body">


                    <div ng-show="addFailed" class="alert alert-danger">
                      <a class="close" data-dismiss="alert">&times;</a>
                      <strong>Failed: </strong>{{ editFailedMessages }}
                    </div>

                    <form name="createKBForm" novalidate class="form-horizontal">
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.id' | translate }}</label>
                        <div ng-class="{ 'ockb-has-error': createKBForm.createContentId.$dirty && createKBForm.createContentId.$invalid || createKBForm.createContentId.$pristine}" class="col-sm-9">
                          <input name="createContentId" ng-model="createContentId" class="form-control" required></input>
                          <span style="color:red" ng-show="createKBForm.createContentId.$dirty && createKBForm.createContentId.$invalid">
                            <span ng-show="createKBForm.createContentId.$error.required">{{ 'add.validation.id' | translate }}</span>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.type' | translate }}</label>
                        <div class="col-sm-9">
                          <tags-input
                              ng-model="tags"
                              on-tag-adding="forceOneTag(tags)"
                              on-tag-removed="removedTag()"
                              on-tag-added="addedTag()"
                              min-length="1"
                              min-tags="1"
                              max-tags="1"
                              placeholder=" "
                              add-on-paste="true">
                            <auto-complete min-length="2" source="loadTags($query)"></auto-complete>
                          </tags-input>
                          <span style="color:red" ng-show="isCreateContentTypeEmpty">{{ 'add.validation.type' | translate }}</span>
                        </div>

                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.description' | translate }}</label>
                        <div class="col-sm-9">
                          <input ng-model="addContent.description" class="form-control"></input>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.level' | translate }}</label>
                        <div class="col-sm-9">
                          <select ng-model="addContent.level" class="form-control">
                            <option ng-repeat="x in addLevels">{{ x }}</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.explanation' | translate }}</label>
                        <div class="col-sm-9">
                          <input ng-model="addContent.explanation" class="form-control"></input>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.impact' | translate }}</label>
                        <div class="col-sm-9">
                          <input ng-model="addContent.impact" class="form-control"></input>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.reason' | translate }}</label>
                        <div class="col-sm-9">
                          <div ng-repeat="reason in reasons">
                            <div class="form-group">
                              <div class="col-sm-12">
                                <div class="col-sm-1">
                                  <label class="control-label">{{$index + 1}}</label>
                                </div>
                                <div class="col-sm-9">
                                  <input class="form-control" ng-model="reason.value" />
                                </div>

                                <div class="col-sm-2">
                                  <button type="button" class="btn btn-success btn-circle" ng-click="incReason($index)">
                                    <i class="glyphicon glyphicon-plus"></i>
                                  </button>
                                  <button type="button" class="btn btn-danger btn-circle" ng-click="rmvReason($index)">
                                    <i class="glyphicon glyphicon-remove"></i>
                                  </button>
                                </div>
                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.steps' | translate }}</label>
                        <div class="col-sm-9">
                          <div ng-repeat="step in steps">
                            <div class="form-group">
                              <div class="col-sm-12">
                                <div class="col-sm-1">
                                  <label class="control-label">{{$index + 1}}</label>
                                </div>
                                <div class="col-sm-9">
                                  <input class="form-control" ng-model="step.value" />
                                </div>

                                <div class="col-sm-2">
                                  <button type="button" class="btn btn-success btn-circle" ng-click="incStep($index)">
                                    <i class="glyphicon glyphicon-plus"></i>
                                  </button>
                                  <button type="button" class="btn btn-danger btn-circle" ng-click="rmvStep($index)">
                                    <i class="glyphicon glyphicon-remove"></i>
                                  </button>
                                </div>
                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">{{ 'detail.label.reference' | translate }}</label>
                        <div class="col-sm-9">
                          <input ng-model="addContent.reference" class="form-control"></input>
                        </div>
                      </div>
                    </form>

                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'add.cancel' | translate }}</button>
                    <button ng-click="saveAddContent()" type="button" ng-disabled="createKBForm.$invalid" class="btn btn-primary">{{ 'add.save' | translate }}</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </body>
</html>
